<div class="visualisations">

    <ng-container *ngFor="let visualisation of visualisations">

        <ng-container *ngIf="visualisation.loading; else loaded">
            <div class="visualisation">
                <mat-card>
                    <div class="loading">
                        <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
                    </div>
                </mat-card>
            </div>
        </ng-container>

        <ng-template #loaded>

            <ng-container [ngSwitch]="visualisation.graphe_id">

                <div class="visualisation">

                    <ng-container *ngSwitchCase="'budget-principal-depenses'">

                        <app-budget-card [titre]="titre_pour(visualisation)"
                            [description]="description_pour(visualisation)" [parametrable]="parametrable"
                            [url_consultation]="url_consultation(visualisation)">

                            <app-budget-principal-graphe [titre]="titre_pour(visualisation)"
                                [description]="description_pour(visualisation)"
                                [donneesBudget]="visualisation.donnees_budgetaires"
                                [informationPlanDeCompte]="visualisation.informations_pdc" rd="depense">
                            </app-budget-principal-graphe>
                        </app-budget-card>

                    </ng-container>


                    <ng-container *ngSwitchCase="'budget-principal-recettes'">

                        <app-budget-card [titre]="titre_pour(visualisation)"
                            [description]="description_pour(visualisation)" [parametrable]="parametrable"
                            [url_consultation]="url_consultation(visualisation)">

                            <app-budget-principal-graphe [titre]="titre_pour(visualisation)"
                                [description]="description_pour(visualisation)"
                                [donneesBudget]="visualisation.donnees_budgetaires"
                                [informationPlanDeCompte]="visualisation.informations_pdc" rd="recette">
                            </app-budget-principal-graphe>
                        </app-budget-card>

                    </ng-container>


                    <ng-container *ngSwitchCase="'top-3-depenses'">

                        <app-budget-card [titre]="titre_pour(visualisation)"
                            [description]="description_pour(visualisation)" [parametrable]="parametrable"
                            [url_consultation]="url_consultation(visualisation)">

                            <app-top-trois-depenses [titre]="titre_pour(visualisation)"
                                [description]="description_pour(visualisation)"
                                [donneesBudget]="visualisation.donnees_budgetaires"
                                [informationsPlanDeCompte]="visualisation.informations_pdc">

                            </app-top-trois-depenses>

                        </app-budget-card>

                    </ng-container>
                </div>

            </ng-container>

        </ng-template>


    </ng-container>

</div>